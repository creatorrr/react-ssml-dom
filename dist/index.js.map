{"version":3,"file":"index.js","sources":["../index.ts"],"sourcesContent":["import ReactReconciler from 'react-reconciler';\n\nimport { Node, TextNode } from 'ssml-dom';\n\nconst rootHostContext = {};\nconst childHostContext = {};\n\nconst reconciler = ReactReconciler<any, any, Node, any, any, any, any, any, any, any, any, any, any>({\n  /* host config for ssml */\n  now: Date.now,\n  supportsMutation: true,\n  isPrimaryRenderer: true,\n  noTimeout: -1,\n  supportsPersistence: false,\n  supportsHydration: false,\n  getRootHostContext: () => rootHostContext,\n  prepareForCommit: () => null,\n  resetAfterCommit: () => undefined,\n  getChildHostContext: () => childHostContext,\n  shouldSetTextContent: (type, props) => typeof props.children === 'string' || typeof props.children === 'number',\n  createInstance: (type, props, rootContainerInstance, hostContext, internalInstanceHandle) => {\n    const domElement = new Node(type);\n    Object.keys(props).forEach((propName) => {\n      const propValue = props[propName];\n      if (propName === 'children') {\n        if (typeof propValue === 'string' || typeof propValue === 'number') {\n          domElement.textContent = String(propValue);\n        }\n      } else {\n        domElement.setAttribute(propName, propValue);\n      }\n    });\n    return domElement;\n  },\n  createTextInstance: (text) => new TextNode(text),\n  appendChildToContainer: (container, child) => {\n    container.appendChild(child);\n  },\n  appendInitialChild: (parent, child) => {\n    parent.appendChild(child);\n  },\n  appendChild(parent, child) {\n    parent.appendChild(child);\n  },\n  finalizeInitialChildren: (domElement, type, props) => false,\n  prepareUpdate(domElement, oldProps, newProps) {\n    return true;\n  },\n  commitUpdate(domElement, updatePayload, type, oldProps, newProps) {\n    Object.entries(newProps).forEach(([propName, propValue]) => {\n      if (propName === 'children') {\n        if (typeof propValue === 'string' || typeof propValue === 'number') {\n          domElement.textContent = propValue;\n        }\n      } else {\n        domElement.setAttribute(propName, propValue);\n      }\n    });\n  },\n  commitTextUpdate(textInstance, oldText, newText) {\n    textInstance.text = newText;\n  },\n  removeChildFromContainer(container, child) {\n    container.removeChild(child);\n  },\n  removeChild(parentInstance, child) {\n    parentInstance.removeChild(child);\n  },\n  cancelTimeout: () => undefined,\n  getPublicInstance: (instance) => instance,\n  preparePortalMount: () => undefined,\n  scheduleTimeout: () => undefined,\n  /** because tree is mutable we implement: */\n  clearContainer: (container) => {\n    container.children = [];\n  },\n});\n\nconst ReactSSML = {\n  /**\n   * @param {JSX.Element} element what to render\n   * @param {Node} container where to render\n   */\n  render(element: JSX.Element, container: Node) {\n    const reactiveContainer = reconciler.createContainer(container, 0, null, false, null, \"\", (_e) => void 0, null);\n    reconciler.updateContainer(element, reactiveContainer, null, null);\n\n    return reactiveContainer;\n  },\n\n  renderToString(element: JSX.Element): string {\n    // virtual node acts as an invisible container\n    const virtualNode = new Node('');\n    this.render(element, virtualNode);\n    return virtualNode.toString();\n  },\n};\n\nexport { ReactSSML, reconciler };\n\nexport default ReactSSML;\n"],"names":["ReactReconciler","Node","TextNode"],"mappings":"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"}